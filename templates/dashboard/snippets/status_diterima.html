{% extends "dashboard/base.html" %}

{% block content %}
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title">Daftar Permohonan Diterima</h4>
        <p class="card-category">Permohonan rekomendasi teknis yang sudah diterima</p>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <!-- Tabel versi Desktop -->
          <table class="table table-striped table-hover d-none d-md-table">
            <thead class="text-primary">
              <tr>
                <th>Layanan</th>
                <th>Pemohon</th>
                <th>Tanggal</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody>
              {% for p in data %}
              <tr>
                <td>{{ p.layanan }}</td>
                <td>{{ p.nama_pemohon }}</td>
                <td>{{ p.tanggal_permohonan|date:"M d, Y" }}</td>
                <td>
                  <a href="{% url 'status_diterima_detail' p.pk %}" class="btn btn-info btn-sm">
                    Detail
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="4" class="text-center">Belum ada permohonan diterima</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>

        <!-- Versi Mobile (Card List) -->
<div class="d-block d-md-none">
  {% for p in data %}
  <div class="card mobile-card shadow-sm">
    <div><strong>{{ p.layanan }}</strong></div>
    <div><small class="text-muted">Pemohon:</small> {{ p.nama_pemohon }}</div>
    <div><small class="text-muted">Tanggal:</small> {{ p.tanggal_permohonan|date:"M d, Y" }}</div>
    <div class="mt-2">
      <a href="{% url 'status_diterima_detail' p.pk %}" class="btn btn-info btn-sm w-100">Detail</a>
    </div>
  </div>
  {% empty %}
  <p class="text-center">Belum ada permohonan diterima</p>
  {% endfor %}
</div>


<style>
  @media (max-width: 768px) {
    .mobile-card {
      margin-bottom: 15px;  /* kasih jarak antar card */
      padding: 12px;        /* isi lebih lega */
      border-radius: 10px;  /* sudut lebih halus */
    }
    .mobile-card strong {
      font-size: 15px;
    }
  }
</style>

{% endblock %}

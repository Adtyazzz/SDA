{% load static %}

<!-- Tambahkan di <head> -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>
/* === HEADER STYLING === */
.header {
  background: #fff;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  z-index: 999;
  padding: 10px 20px;
}

.header .sitename {
  font-size: 20px;
  font-weight: 600;
  color: #004085;
}

/* --- DESKTOP NAV --- */
.header-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.navmenu {
  display: flex;
  align-items: center;
}

.navmenu ul {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  gap: 15px;
}

.navmenu ul li {
  position: relative;
}

.navmenu ul li a {
  text-decoration: none;
  color: #333;
  font-weight: 500;
  padding: 8px 12px;
  display: block;
}

.navmenu ul li a:hover {
  color: #007bff;
}

.navmenu ul li ul {
  display: none;
  position: absolute;
  background: #fff;
  top: 100%;
  left: 0;
  min-width: 200px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  z-index: 1000;
}

.navmenu ul li:hover > ul {
  display: block;
}

/* Tombol Login/Dashboard */
.btn-getstarted {
  padding: 8px 16px;
  background: #007bff;
  color: #fff;
  font-weight: 600;
  border-radius: 30px;
  text-decoration: none;
  transition: 0.3s;
}

.btn-getstarted:hover {
  background: #0056b3;
  color: #fff;
}

/* === Mobile Style === */
.mobile-nav-toggle {
  font-size: 28px;
  cursor: pointer;
  display: none;
}

@media (max-width: 991px) {
  .navmenu {
    position: fixed;
    top: 0;
    right: -100%;
    width: 260px;
    height: 100%;
    background: #fff;
    flex-direction: column;
    padding: 20px;
    transition: 0.3s;
    box-shadow: -2px 0 10px rgba(0,0,0,0.1);
    overflow-y: auto;
  }
  .navmenu.active {
    right: 0;
  }
  .navmenu ul {
    flex-direction: column;
    gap: 10px;
  }
  .navmenu ul li ul {
    position: static;
    box-shadow: none;
    padding-left: 15px;
  }
  .mobile-nav-toggle {
    display: block;
  }
}
</style>

<header id="header" class="header d-flex align-items-center fixed-top">
    <a href="/" class="logo d-flex align-items-center me-auto me-xl-0">
      <div class="navbar-brand d-flex align-items-center">
        <img src="{% static 'halaman/assets/img/logopemprov.png' %}" alt="Logo PU" class="img-fluid me-2" style="height: 40px;">
        <h1 class="sitename m-0">Portal Informasi SDA</h1>
      </div>
    </a>

    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="/"><i class="fa-solid fa-house fa-2x"></i></a></li>
        
        <!-- === PROFIL === -->
        <li class="dropdown">
          <a href="#"><span>PROFIL</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            <li><a href="{% url 'visi_misi' %}">Visi dan Misi</a></li>
            <li><a href="{% url 'tugas_fungsi' %}">Tugas dan Fungsi</a></li>
            <li><a href="{% url 'struktur_organisasi' %}">Struktur Organisasi</a></li>
            <li><a href="{% url 'sejarah' %}">Sejarah</a></li>
            <li><a href="https://maps.app.goo.gl/ZEyGVMGosLNpjF5m8" target="_blank">Lokasi Kantor</a></li>
          </ul>
        </li>

        <!-- === KELEMBAGAAN === -->
        <li class="dropdown">
          <a href="#"><span>KELEMBAGAAN</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            <li><a href="{% url 'tkpsda' %}">TKPSDA</a></li>
            <li><a href="{% url 'dewan_sda' %}">Dewan Sumber Daya Air</a></li>
            <li><a href="{% url 'komisi_irigasi' %}">KOMISI IRIGASI</a></li>
          </ul>
        </li>

        <!-- === APLIKASI === -->
        <li class="dropdown">
          <a href="#"><span>APLIKASI</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            <li><a href="https://katalog-peta.portal-sdadpuprkaltim.my.id/geonetwork" target="_blank">Katalog Peta Sumber Daya Air</a></li>
            <li><a href="http://ews.portal-sdadpuprkaltim.info/" target="_blank">Early Warning Sistem</a></li>
            <li><a href="http://sih3.gginformatika.com/" target="_blank">SIH3</a></li>
            <li><a href="https://srikandi.layanan.go.id/" target="_blank">E - Office SRIKANDI</a></li>
            <li><a href="https://siteman-irigasi.kaltimprov.go.id/" target="_blank">Siteman Irigasi Kaltim</a></li>
          </ul>
        </li>

        <!-- === PUBLIKASI === -->
        <li class="dropdown">
          <a href="#"><span>PUBLIKASI</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            <li class="dropdown">
              <a href="#"><span>Informasi SDA</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="{% url 'pola_wilayah_sungai' %}">Pola Wilayah Sungai</a></li>
                <li><a href="{% url 'infrastruktur_sda' %}">Infrastruktur SDA</a></li>
                <li><a href="{% url 'hari_air_dunia' %}">Hari Air Dunia</a></li>
                <li><a href="{% url 'rencana_psda' %}">Rencana PSDA Wilayah Sungai</a></li>
                <li><a href="{% url 'sebaran_perizinan_sda' %}">Sebaran Perizinan SDA</a></li>
                <li><a href="{% url 'pemberdayaan_masyarakat' %}">Pemberdayaan Masyarakat</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#"><span>Perencanaan & Kinerja</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="{% url 'renstra_sda' %}">Renstra SDA</a></li>
                <li><a href="{% url 'laporan_kinerja' %}">Laporan Kinerja DPUPRPERA KALTIM 2024</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#"><span>Media Informasi</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="{% url 'majalah_banyu' %}">Majalah Banyu</a></li>
                <li><a href="{% url 'profil_sda' %}">Profil SDA</a></li>
                <li><a href="{% url 'publikasi_hidrologi' %}">Publikasi Hidrologi</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#"><span>Galeri</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="{% url 'foto' %}">Galeri Foto</a></li>
                <li><a href="{% url 'video' %}">Galeri Video</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="#"><span>Hasil Survey Kepuasan</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li><a href="{% url 'ikm' %}">Indeks Kepuasan Masyarakat (IKM)</a></li>
                <li><a href="{% url 'pelayanan_hidrologi' %}">Pelayanan Hidrologi dan Kualitas Air</a></li>
                <li><a href="{% url 'pelayanan_rekomtek' %}">Pelayanan Rekomtek</a></li>
              </ul>
            </li>
          </ul>
        </li>

        <!-- === LAYANAN PUBLIK === -->
        <li class="dropdown">
          <a href="#"><span>LAYANAN PUBLIK</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            <li><a href="https://www.lapor.go.id/" target="_blank">Pengaduan</a></li>
            <li><a href="{% url 'peraturan' %}">Peraturan</a></li>
            <li><a href="{% url 'sop' %}">SOP</a> </li>
          </ul>
        </li>

        <!-- Contact -->
        <li><a href="{% url 'contact' %}">Hubungi Kami</a></li>
      </ul>
    </nav>

    <!-- Login / Dashboard -->
    {% if user.is_authenticated %}
      {% if user.is_staff or user.is_superuser %}
        <a class="btn-getstarted" href="{% url 'admin:index' %}">Dashboard</a>
      {% else %}
        <a class="btn-getstarted" href="{% url 'dashboard' %}">Dashboard</a>
      {% endif %}
    {% else %}
      <a class="btn-getstarted" href="{% url 'akun_login' %}">LOGIN</a>
    {% endif %}

    <!-- Toggle Mobile -->
    <i class="mobile-nav-toggle bi bi-list"></i>

</header>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const toggleBtn = document.querySelector('.mobile-nav-toggle');
  const navMenu = document.querySelector('#navmenu');

  toggleBtn.addEventListener('click', function () {
    navMenu.classList.toggle('active');
    this.classList.toggle('bi-list');
    this.classList.toggle('bi-x');
  });
});
</script>
